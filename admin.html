
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Attendance Admin</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="topbar">
    <div style="display:flex; align-items:center; gap:10px">
      <span style="font-weight:800; letter-spacing:.4px">LEARNING MANAGEMENT SYSTEM</span>
      <span class="badge">Admin</span>
    </div>
    <div><button id="logoutBtn" class="btn ghost">Logout</button></div>
  </div>

  <h1>Admin Panel</h1>

  <div class="container">
    <div class="card">
      <h3>Create / Update Class Day</h3>
      <div class="grid" style="margin-top:8px">
        <div class="field" style="grid-column:span 4">
          <label for="classDate">Date</label>
          <input type="date" id="classDate" />
        </div>
        
      <div class="field" style="grid-column:span 12">
  <label>Class Details</label>
  <table class="table" id="classDetailsTable">
    <thead><tr><th>Period</th><th>Subject</th><th>Faculty</th></tr></thead>
    <tbody>
      <tr>
        <td><input type="number" min="1" value="1"></td>
        <td><input type="text" placeholder="Subject"></td>
        <td><input type="text" placeholder="Faculty"></td>
      </tr>
    </tbody>
  </table>
  <button id="addRowBtn" class="btn secondary">+ Add Period</button>
      </div>
        <div class="field" style="grid-column:span 4">
          <label>&nbsp;</label>
          <button id="saveBtn" class="btn">Save Day</button>
        </div>
      </div>
      <p class="small">Saving again overwrites class count for that date.</p>
    </div>

    <div class="card" style="margin-top:18px">
  <h3>Create Weekly Timetable (Bulk Save)</h3>

  <!-- Tabs -->
  <div style="margin-bottom:10px">
    <button class="btn secondary weekdayTab" data-day="1">Monday</button>
    <button class="btn secondary weekdayTab" data-day="2">Tuesday</button>
    <button class="btn secondary weekdayTab" data-day="3">Wednesday</button>
    <button class="btn secondary weekdayTab" data-day="4">Thursday</button>
    <button class="btn secondary weekdayTab" data-day="5">Friday</button>
  </div>

  <!-- Weekday tables -->
  <div id="weekdayTables">
    <div class="weekday-table" id="table-1">
      <h4>Monday</h4>
      <table class="table">
        <thead><tr><th>Period</th><th>Subject</th><th>Faculty</th></tr></thead>
        <tbody></tbody>
      </table>
      <button class="btn secondary addRowBtn" data-day="1">+ Add Period</button>
    </div>

    <div class="weekday-table" id="table-2" style="display:none">
      <h4>Tuesday</h4>
      <table class="table">
        <thead><tr><th>Period</th><th>Subject</th><th>Faculty</th></tr></thead>
        <tbody></tbody>
      </table>
      <button class="btn secondary addRowBtn" data-day="2">+ Add Period</button>
    </div>

    <div class="weekday-table" id="table-3" style="display:none">
      <h4>Wednesday</h4>
      <table class="table">
        <thead><tr><th>Period</th><th>Subject</th><th>Faculty</th></tr></thead>
        <tbody></tbody>
      </table>
      <button class="btn secondary addRowBtn" data-day="3">+ Add Period</button>
    </div>

    <div class="weekday-table" id="table-4" style="display:none">
      <h4>Thursday</h4>
      <table class="table">
        <thead><tr><th>Period</th><th>Subject</th><th>Faculty</th></tr></thead>
        <tbody></tbody>
      </table>
      <button class="btn secondary addRowBtn" data-day="4">+ Add Period</button>
    </div>

    <div class="weekday-table" id="table-5" style="display:none">
      <h4>Friday</h4>
      <table class="table">
        <thead><tr><th>Period</th><th>Subject</th><th>Faculty</th></tr></thead>
        <tbody></tbody>
      </table>
      <button class="btn secondary addRowBtn" data-day="5">+ Add Period</button>
    </div>
  </div>

  <!-- Date range -->
  <div class="grid" style="margin-top:10px">
    <div class="field" style="grid-column:span 4">
      <label for="multiStart">Start Date</label>
      <input type="date" id="multiStart" />
    </div>
    <div class="field" style="grid-column:span 4">
      <label for="multiEnd">End Date</label>
      <input type="date" id="multiEnd" />
    </div>
    <div class="field" style="grid-column:span 4">
      <label>&nbsp;</label>
      <button id="saveWeeklyBtn" class="btn success">Save Weekly Range</button>
    </div>
  </div>
  <p class="small">Schedules will be created for each weekday (Mon–Fri) between start and end date.</p>
</div>

    <div class="card" style="margin-top:18px">
      <div style="display:flex; justify-content:space-between; align-items:center">
        <h3>All Scheduled Days</h3>
        <div class="badge" id="totalClasses">0 total classes</div>
      </div>
      <table class="table" id="scheduleTable">
        <thead><tr><th>Date</th><th>Class Count</th></tr></thead>
        <tbody></tbody>
      </table>
      <div style="text-align:center; margin-top:10px">
    <button id="toggleScheduleBtn" class="btn secondary" style="display:none">
      Show More
    </button>
  </div>
    </div>

    <div class="card" style="margin-top:18px">
      <h3>Mark Attendance</h3>
      <div class="grid" style="margin-top:8px; align-items:end">
        <div class="field" style="grid-column:span 4">
          <label for="attendanceDate">Date</label>
          <input type="date" id="attendanceDate" />
        </div>
        <div class="field" style="grid-column:span 4">
          <label>Total Classes (from schedule)</label>
          <input type="number" id="attendanceTotal" min="0" value="0" disabled />
        </div>
        <div class="field" style="grid-column:span 4">
          <button id="loadStudentsBtn" class="btn secondary">Load Students</button>
        </div>
      </div>
      <table class="table" id="attendanceTable" style="margin-top:12px">
        <thead><tr><th>Name</th><th>Email</th><th>Attended Classes</th></tr></thead>
        <tbody id="attendanceTBody"></tbody>
      </table>
      <div class="sticky-actions">
        <button id="saveAttendanceBtn" class="btn success">Save Attendance</button>
      </div>
      <p class="small">Values are clamped between 0 and Total Classes.</p>
    </div>
  </div>

  <footer>© Guru Nanak Institute of Technology</footer>

  <script type="module" src="admin.js"></script>
</body>
</html>
